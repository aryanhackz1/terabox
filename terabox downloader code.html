<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TBoxDownloader Webview - locked</title>
  <style>
    :root{
      --translateY: -355px;      /* iframe shifted to show input area */
      --cutout-top: 60px;       /* top position of click-through area (px) */
      --cutout-height: 220px;   /* height of click-through area (px) */
      --cutout-width: 90%;      /* width of click-through area */
      --cutout-left: 5%;        /* left offset of click-through area */
      --whitecover-height: 180px; /* white cover height to hide updates section */
    }

    html,body{
      height:100%;
      margin:0;
      padding:0;
      overflow:hidden;
      overscroll-behavior:none;
      -webkit-user-select:none;
      -webkit-touch-callout:none;
      background:#000;
    }

    .frame-container {
      position:relative;
      width:100%;
      height:100%;
      overflow:hidden;
    }

    iframe {
      width:100%;
      height:130%;
      border:0;
      transform: translateY(var(--translateY));
      will-change: transform;
      touch-action: pan-x pan-y;
    }

    .overlay {
      position:absolute;
      inset:0;
      z-index:9999;
      pointer-events:none;
      touch-action:none;
      background: transparent;
    }

    .white-cover {
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      height:var(--whitecover-height);
      background:#fff;
      z-index:10001;
      pointer-events:auto;
      box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
    }

    .click-zone {
      position:absolute;
      top:var(--cutout-top);
      left:var(--cutout-left);
      width:var(--cutout-width);
      height:var(--cutout-height);
      z-index:10002;
      pointer-events:none;
    }

    .sr-only { position: absolute; left:-9999px; }
  </style>
</head>
<body>
  <div class="frame-container">
    <iframe id="webview" 
            src="https://tboxdownloader.in/" 
            title="TBoxDownloader Webview" 
            tabindex="0" 
            scrolling="no"
            allow="fullscreen; autoplay; picture-in-picture">
    </iframe>

    <div id="overlay" class="overlay" aria-hidden="true">
      <div class="white-cover"></div>
      <div id="clickZone" class="click-zone" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function(){
      const overlay = document.getElementById('overlay');
      const clickZone = document.getElementById('clickZone');
      const iframe = document.getElementById('webview');
      const TELEGRAM_URL = "https://t.me/+Hu84AVJbLU85OGNl";

      function isInsideClickZonePoint(x, y){
        const r = clickZone.getBoundingClientRect();
        return x >= r.left && x <= r.right && y >= r.top && y <= r.bottom;
      }

      function handlePointerEvent(e){
        let x, y;
        if (e.type.startsWith('touch')){
          if (e.touches && e.touches.length) {
            x = e.touches[0].clientX;
            y = e.touches[0].clientY;
          } else if (e.changedTouches && e.changedTouches.length){
            x = e.changedTouches[0].clientX;
            y = e.changedTouches[0].clientY;
          }
        } else {
          x = e.clientX;
          y = e.clientY;
        }

        if (typeof x === 'number' && isInsideClickZonePoint(x,y)) {
          return;
        }

        e.preventDefault();
        e.stopPropagation();
      }

      // Iframe ke andar ki links ko block karna aur Telegram pe redirect karna
      function setupRedirectProtection() {
        // Iframe load hone ke baad protection lagao
        iframe.addEventListener('load', function() {
          try {
            // Iframe ke content ko access karke sab links ko modify karo
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            // Sab anchor tags ko pakdo
            const links = iframeDoc.querySelectorAll('a');
            links.forEach(link => {
              link.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                // Telegram channel pe redirect karo
                window.location.href = TELEGRAM_URL;
                return false;
              });
              
              // Href bhi change kar do
              link.href = "javascript:void(0)";
            });
            
            // Form submissions ko bhi block karo
            const forms = iframeDoc.querySelectorAll('form');
            forms.forEach(form => {
              form.addEventListener('submit', function(e) {
                e.preventDefault();
                e.stopPropagation();
                window.location.href = TELEGRAM_URL;
                return false;
              });
            });
            
            // JavaScript navigation ko bhi block karo
            iframe.contentWindow.addEventListener('beforeunload', function(e) {
              window.location.href = TELEGRAM_URL;
              return "Redirecting to Telegram...";
            });
            
          } catch (error) {
            // Cross-origin restriction agar hai to
            console.log("Cross-origin restrictions apply");
          }
        });
      }

      // Page load hone pe protection setup karo
      window.addEventListener('load', setupRedirectProtection);

      ['wheel','mousewheel','DOMMouseScroll'].forEach(name=>{
        overlay.addEventListener(name, handlePointerEvent, {passive:false, capture:true});
        window.addEventListener(name, function(e){ e.preventDefault(); }, {passive:false, capture:true});
      });

      overlay.addEventListener('touchmove', handlePointerEvent, {passive:false, capture:true});
      
      window.addEventListener('touchmove', function(e){
        const t = e.touches && e.touches[0];
        if (t && isInsideClickZonePoint(t.clientX, t.clientY)) return;
        e.preventDefault();
      }, {passive:false, capture:true});

      window.addEventListener('keydown', function(e){
        const keys = ['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','PageUp','PageDown','Home','End',' '];
        if (keys.includes(e.key) || [32,33,34,35,36,37,38,39,40].includes(e.keyCode)) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      }, {capture:true});

      iframe.addEventListener('load', () => {
        iframe.style.transform = getComputedStyle(document.documentElement).getPropertyValue('--translateY') || 'translateY(-355px)';
      });

      document.addEventListener('click', function(e){
        if (isInsideClickZonePoint(e.clientX, e.clientY)) {
          try { iframe.focus(); } catch(err){}
        }
      }, {capture:false});

      document.addEventListener('touchstart', function(e) {
      }, {passive: true});

      document.addEventListener('touchend', function(e) {
      }, {passive: true});

      document.addEventListener('click', function(e) {
      }, {passive: true});

      // Extra safety: Agar koi bhi attempt ho page change karne ka
      window.addEventListener('beforeunload', function(e) {
        // Allow only Telegram redirect
        if (window.location.href !== TELEGRAM_URL) {
          window.location.href = TELEGRAM_URL;
          return "Redirecting to Telegram...";
        }
      });

    })();
  </script>
</body>
</html>